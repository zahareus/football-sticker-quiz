/* style.css (Full code) */

/* ------------------------------ */
/* Variables & Basic Reset        */
/* ------------------------------ */
:root {
    --font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    --color-text: #212121;
    --color-background: #FFFFFF;
    --color-accent: #FFC107;
    --color-accent-darker: #FFA000;
    --color-accent-text: #212121;
    --color-secondary-bg: #f8f9fa;
    --color-secondary-bg-hover: #e9ecef;
    --color-border: #E0E0E0;
    --color-disabled-bg: #E0E0E0;
    --color-disabled-text: #9E9E9E;
    --color-success: #28a745;
    --color-error: #dc3545;
    --color-error-bg: #f8d7da;
    --color-info-text: #555;
    --color-rank: #757575;
    --color-link: #007bff;
    --color-link-hover: #0056b3;
    --color-separator-text: #adb5bd;
    --color-footer-text: #6c757d;


    --border-radius: 8px;
    --container-width: 800px;
    --spacing-unit: 8px;
    --header-height: 60px;
}

/* --- Reset Styles --- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: var(--font-family); line-height: 1.6; background-color: var(--color-background); color: var(--color-text); padding: 0 var(--spacing-unit); display: flex; flex-direction: column; min-height: 100vh;}
h1, h2, h3, h4, h5, h6 { color: var(--color-text); } /* General heading color */
h1 { font-weight: 600; margin-bottom: calc(var(--spacing-unit) * 3); text-align: center; } /* Default H1, will be overridden by #catalogue-container > h1 for catalogue page */
h2 { font-weight: 500; margin-bottom: calc(var(--spacing-unit) * 2); }
p { margin-bottom: calc(var(--spacing-unit) * 2); }
ol, ul { list-style: none; }
img { max-width: 100%; display: block; }
button { font-family: inherit; cursor: pointer; background: none; border: none; padding: 0; color: inherit; }
input[type="text"] { font-family: inherit; padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.5); border: 1px solid var(--color-border); border-radius: var(--border-radius); font-size: 1em; margin-right: var(--spacing-unit); }

/* ------------------------------ */
/* Layout & Container             */
/* ------------------------------ */
.container { max-width: var(--container-width); margin: calc(var(--spacing-unit) * 2) auto; padding: 0 calc(var(--spacing-unit) * 2); text-align: center; flex-grow: 1; }

/* --- Header Styling --- */
.app-header { display: flex; justify-content: space-between; align-items: center; padding: 0 calc(var(--spacing-unit) * 2); min-height: var(--header-height); max-width: calc(var(--container-width) + 4 * var(--spacing-unit)); margin: 0 auto; position: relative; }
body:not(.logged-out) .app-header { margin-bottom: calc(var(--spacing-unit) * 2); }
body.logged-out .app-header { justify-content: center; height: auto; margin-bottom: 0; padding-top: calc(var(--spacing-unit) * 3); padding-bottom: calc(var(--spacing-unit) * 2); }
body.logged-out #auth-section { display: none !important; }
.logo-container { display: flex; align-items: center; margin-left: 0; margin-right: 0;}
#app-logo { height: calc(var(--header-height) * 0.5); width: auto; max-height: 32px; transition: all 0.3s ease; display: block; }
body.logged-out #app-logo { height: auto; width: 45%; max-width: 280px; max-height: none; margin: 0 auto calc(var(--spacing-unit) * 3) auto; }

/* --- Intro Text --- */
.intro-text { max-width: 600px; margin: calc(var(--spacing-unit) * -2) auto calc(var(--spacing-unit) * 2) auto; font-size: 1em; line-height: 1.6; color: var(--color-info-text); }
.intro-text p { margin-bottom: 0; }
.intro-text a { color: var(--color-link); text-decoration: underline; font-weight: 500; }
@media (hover: hover) { .intro-text a:hover { color: var(--color-link-hover); } }

/* --- Player Statistics --- */
.player-stats { max-width: 600px; margin: 0 auto calc(var(--spacing-unit) * 4) auto; font-size: 0.9em; line-height: 1.6; color: var(--color-info-text); text-align: center; }
.player-stats p { margin-bottom: 0; }
.player-stats span { font-weight: 600; color: var(--color-text); }
.leaderboard-link { color: var(--color-info-text); text-decoration: none; font-weight: 500; }
@media (hover: hover) { .leaderboard-link:hover { color: var(--color-link); text-decoration: underline; } }

/* --- Buttons --- */
.btn { display: inline-block; padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5); font-size: 1em; font-weight: 500; border: 1px solid transparent; border-radius: var(--border-radius); text-align: center; text-decoration: none; transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease; margin: calc(var(--spacing-unit)/2); vertical-align: middle; cursor: pointer; }
.btn-primary { background-color: var(--color-accent); color: var(--color-accent-text); border-color: var(--color-accent); box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); }
.btn-secondary { background-color: var(--color-background); color: var(--color-text); border: 1px solid var(--color-border); }
.btn-small { padding: calc(var(--spacing-unit) * 0.75) calc(var(--spacing-unit) * 1.5); font-size: 0.9em; }
.btn-large { padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 3); font-size: 1.1em; }

/* Navigation buttons - unified style (white background with border) */
.btn-nav,
.home-actions .btn,
.stats-actions .btn,
.leaderboard-actions .btn {
    background-color: var(--color-background);
    color: var(--color-text);
    border: 1px solid var(--color-border);
    box-shadow: none;
}
@media (hover: hover) {
    .btn-nav:hover:not(:disabled),
    .home-actions .btn:hover:not(:disabled),
    .stats-actions .btn:hover:not(:disabled),
    .leaderboard-actions .btn:hover:not(:disabled) {
        background-color: var(--color-accent);
        border-color: var(--color-accent);
        color: var(--color-accent-text);
    }
}
.btn-icon { background: none; border: none; padding: 0 calc(var(--spacing-unit) * 0.5); font-size: 1.1em; vertical-align: middle; margin-left: var(--spacing-unit); color: var(--color-text); opacity: 0.7; cursor: pointer; }
.btn-filter { padding: calc(var(--spacing-unit) * 0.5) calc(var(--spacing-unit) * 1.5); font-size: 0.9em; background-color: transparent; color: var(--color-text); border: 1px solid transparent; margin: 0 calc(var(--spacing-unit) * 0.5); opacity: 0.8; cursor: pointer; border-radius: var(--border-radius); }
.btn-filter.active { font-weight: 600; background-color: var(--color-accent); color: var(--color-accent-text); opacity: 1; }
button:disabled, .btn:disabled { cursor: not-allowed !important; background-color: var(--color-disabled-bg) !important; color: var(--color-disabled-text) !important; border-color: var(--color-disabled-bg) !important; box-shadow: none !important; opacity: 1 !important; }
.btn-filter:disabled { background-color: var(--color-accent) !important; color: var(--color-accent-text) !important; opacity: 0.7 !important; cursor: not-allowed !important; }
.btn-link { background: none; border: none; color: var(--color-info-text); text-decoration: none; padding: 0; font-size: 1em; font-weight: 400; vertical-align: middle; cursor: pointer; margin: 0; line-height: 1; }
.button-group { display: flex; flex-wrap: wrap; justify-content: center; gap: calc(var(--spacing-unit) * 1.5); margin-top: calc(var(--spacing-unit) * 2); }

/* --- Authentication Section --- */
#auth-section { font-size: 0.9em; text-align: right; display: flex; align-items: center; gap: var(--spacing-unit); flex-wrap: wrap; }
#user-status { display: flex; align-items: center; gap: calc(var(--spacing-unit) * 1.5); flex-wrap: nowrap; }
#user-nickname { font-weight: 400; cursor: pointer; color: var(--color-info-text); text-decoration: none; display: inline-block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 120px; vertical-align: middle; }
#user-status > *:not(:last-child)::after { content: '|'; margin-left: calc(var(--spacing-unit) * 1.5); color: var(--color-border); font-weight: 300; }
#edit-nickname-form { display: none; position: absolute; right: calc(var(--spacing-unit) * 2); top: calc(var(--header-height) + var(--spacing-unit)); background-color: var(--color-background); padding: calc(var(--spacing-unit) * 2); border: 1px solid var(--color-border); border-radius: var(--border-radius); box-shadow: 0 4px 10px rgba(0,0,0,0.1); z-index: 10; min-width: 300px; text-align: left; }
#edit-nickname-form input { margin-bottom: var(--spacing-unit); display: block; width: 100%; }
#edit-nickname-form button { margin-top: var(--spacing-unit); margin-right: var(--spacing-unit); }

/* --- Landing Page --- */
#landing-page { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: calc(var(--spacing-unit) * 2) 0; min-height: 250px; }
#landing-page .google-login span { display: inline; }
#landing-page .separator { color: var(--color-separator-text); margin: calc(var(--spacing-unit) * 2) 0; font-size: 0.9em; text-transform: uppercase; }
#landing-page button.btn { width: 90%; max-width: 320px; margin-left: auto; margin-right: auto; display: block; margin-top: var(--spacing-unit); margin-bottom: var(--spacing-unit); }
#landing-page button.google-login { display: inline-flex; justify-content: center; align-items: center; width: 90%; max-width: 320px; }

/* --- Difficulty Selection --- */
#difficulty-selection { max-width: 320px; margin-left: auto; margin-right: auto; }
.difficulty-options-container { display: flex; flex-direction: column; align-items: center; gap: calc(var(--spacing-unit) * 2.5); margin-top: calc(var(--spacing-unit) * 2); }
.difficulty-option { width: 100%; text-align: center; }
.difficulty-option button.difficulty-button { width: 100%; display: block; margin-bottom: calc(var(--spacing-unit) * 0.75); }
.difficulty-description { font-size: 0.85em; color: var(--color-info-text); padding: 0 var(--spacing-unit); margin: 0; line-height: 1.4; }
.leaderboard-action { width: 100%; margin-top: calc(var(--spacing-unit) * 2.5); text-align: center; }
.leaderboard-action button { width: 100%; display: block; margin-bottom: calc(var(--spacing-unit) * 1); }
.leaderboard-stats { font-size: 0.9em; color: var(--color-info-text); margin: 0; }
.leaderboard-stats span { font-weight: 600; color: var(--color-text); }

/* ------------------------------ */
/* Game Area                      */
/* ------------------------------ */
#game-area { margin-top: calc(var(--spacing-unit) * 2); }
#sticker-container { width: 300px; height: 300px; margin: 0 auto calc(var(--spacing-unit) * 3) auto; background-color: var(--color-secondary-bg); border: 1px solid var(--color-border); border-radius: var(--border-radius); overflow: hidden; display: flex; align-items: center; justify-content: center; }
#sticker-image { width: 100%; height: 100%; object-fit: contain; }
#sticker-image[alt*="Loading"], #sticker-image[alt*="Error"] { width: 50px; height: 50px; }
#sticker-image.fade-in { animation: fadeIn 0.4s ease-out; }

/* Default styles for game-right-panel (mobile/tablet) */
.game-right-panel {
    display: contents; /* On mobile, behave as if wrapper doesn't exist */
}

/* Desktop horizontal layout for quiz */
@media (min-width: 1000px) {
    /* Use !important to override inline style="display: block" set by JavaScript */
    #game-area[style*="block"] {
        display: flex !important;
        flex-direction: row;
        align-items: flex-start;
        justify-content: center;
        gap: calc(var(--spacing-unit) * 4);
        margin-top: calc(var(--spacing-unit) * 2);
        /* Allow game area to expand beyond container */
        width: calc(100vw - var(--spacing-unit) * 4);
        max-width: 1000px;
        margin-left: auto;
        margin-right: auto;
        position: relative;
        left: 50%;
        transform: translateX(-50%);
    }

    #sticker-container {
        /* Adaptive size based on viewport height to fit without scrolling */
        width: min(600px, calc(100vh - 300px));
        height: min(600px, calc(100vh - 300px));
        min-width: 450px;
        min-height: 450px;
        margin: 0;
        flex-shrink: 0;
    }

    .game-right-panel {
        display: flex !important;
        flex-direction: column;
        align-items: center;
        gap: calc(var(--spacing-unit) * 2);
        flex-shrink: 0;
    }

    #game-area .game-info {
        display: flex;
        justify-content: space-between;
        width: 300px;
        margin-top: 0;
        margin-bottom: calc(var(--spacing-unit) * 1);
    }

    #game-area .options-group {
        grid-template-columns: 1fr;
        gap: calc(var(--spacing-unit) * 1.5);
    }

    #game-area #lives {
        position: static;
        transform: none;
    }
}

.options-group {
    display: grid;
    grid-template-columns: repeat(2, 300px); /* Fixed width matching sticker */
    gap: calc(var(--spacing-unit) * 1.5);
    margin: 0 auto;
    justify-content: center;
}
.options-group button,
.options-group a.btn {
    /* Fixed dimensions matching sticker container width */
    width: 300px; /* Same as #sticker-container */
    height: 68px;

    margin: 0;
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    color: var(--color-text);
    font-weight: 400;
    font-size: 1em;
    text-decoration: none;
    padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 1.5);

    /* Text layout */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;

    /* Text wrapping for long names */
    white-space: normal;
    overflow-wrap: break-word;
    word-break: break-word;
    line-height: 1.35;

    /* Hide overflow if text still exceeds */
    overflow: hidden;
}
@media (max-width: 600px) {
    .options-group {
        grid-template-columns: 1fr;
    }
    .game-info {
        width: 100%;
        max-width: 300px;
    }
    #timer, #lives, #score {
        font-size: 0.85em;
    }
}
.options-group button.correct-answer { background-color: var(--color-success) !important; border-color: var(--color-success) !important; color: white !important; font-weight: 600; }
.options-group button.incorrect-answer { background-color: var(--color-error) !important; border-color: var(--color-error) !important; color: white !important; opacity: 0.7; }

/* --- Game Info Timer & Score --- */
/* Width matches options-group exactly */
.game-info {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    /* Match options-group: 2 × 300px + gap = 612px */
    width: calc(600px + var(--spacing-unit) * 1.5);
    margin: calc(var(--spacing-unit) * 3) auto 0;
}
#timer, #score, #lives {
    font-size: 0.95em;
    color: var(--color-info-text);
    font-weight: 500;
    white-space: nowrap;
}
#time-left, #current-score {
    display: inline-block;
    min-width: 2ch;
    text-align: right;
    font-weight: 700;
    font-size: 1.15em;
    color: var(--color-text);
    margin-left: 4px;
    vertical-align: baseline;
}
#time-left {
    transition: color 0.3s ease;
}
#time-left.low-time {
  color: var(--color-error);
}

/* --- Lives Display (Classic Mode) --- */
#lives-hearts {
    margin-left: 4px;
}
#lives .heart {
    font-size: 1.05em;
    margin: 0 1px;
    color: #6b7280; /* Default gray - after losing (desktop) */
}
#lives .heart.active {
    color: #ef4444 !important; /* Red when active */
}
#lives .heart.losing {
    animation: heart-blink 0.5s ease-in-out 3;
}
@keyframes heart-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}
/* Mobile: hide lost hearts instead of showing gray */
@media (max-width: 1000px) {
    #lives .heart:not(.active):not(.losing) {
        display: none;
    }
}
#time-left.timer-tick-animation {
  color: var(--color-error) !important;
  animation: timer-tick 0.35s ease-in-out;
}

/* --- Animations --- */
@keyframes score-bump { 0% { transform: scale(1); color: var(--color-text); } 50% { transform: scale(1.3); color: var(--color-accent-darker); } 100% { transform: scale(1); color: var(--color-text); } }
@keyframes final-score-flash { 0% { opacity: 1; transform: scale(1); } 30% { opacity: 0.5; transform: scale(1.3); } 70% { opacity: 1; transform: scale(1.05); } 100% { opacity: 1; transform: scale(1); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes timer-tick { 0% { transform: scale(1); } 50% { transform: scale(1.4); } 100% { transform: scale(1); } }

/* --- Animation Classes --- */
#score.score-updated { animation: score-bump 0.4s ease-out; }
#final-score.final-score-animated { display: inline-block; animation: final-score-flash 1.1s ease-in-out; }
#sticker-image.fade-in { animation: fadeIn 0.4s ease-out; }


/* --- Result Panel (inside game-area, sticker stays in place) --- */

/* Hide game panel and show result panel when quiz is over */
body.quiz-result .game-right-panel {
    display: none !important;
}

body.quiz-result .result-right-panel {
    display: flex !important;
    flex-direction: column;
    align-items: center;
    gap: calc(var(--spacing-unit) * 2);
}

/* Result right panel - same positioning as game-right-panel */
.result-right-panel {
    display: none;
}

/* Result info replaces timer/score section */
.result-info {
    display: flex;
    justify-content: space-around;
    align-items: baseline;
    margin-top: calc(var(--spacing-unit) * 3);
    max-width: 300px;
    margin-left: auto;
    margin-right: auto;
    gap: calc(var(--spacing-unit) * 4);
    flex-direction: column;
    text-align: center;
}

/* Game Over text - black and bold */
#game-over-text {
    font-size: 1.3em;
    font-weight: 700;
    color: var(--color-text);
    margin: 0;
}

#game-over-text.game-over-animated {
    animation: game-over-flash 0.8s ease-out;
}

@keyframes game-over-flash {
    0% { transform: scale(1); opacity: 1; }
    25% { transform: scale(1.4); opacity: 0.8; }
    50% { transform: scale(1.5); opacity: 0.7; }
    75% { transform: scale(1.2); opacity: 0.9; }
    100% { transform: scale(1); opacity: 1; }
}

.result-right-panel .final-score-container {
    font-size: 1.3em;
    font-weight: 500;
    color: var(--color-info-text);
    margin: 0;
}
.result-right-panel #final-score {
    font-weight: 700;
    color: var(--color-accent-darker);
}

/* Result options use same styling as game options */
.result-options {
    /* Inherits from .options-group */
}

/* Desktop: result panel matches game panel positioning */
@media (min-width: 1000px) {
    body.quiz-result .result-right-panel {
        display: flex !important;
        flex-direction: column;
        align-items: center;
        gap: calc(var(--spacing-unit) * 2);
        flex-shrink: 0;
    }

    .result-info {
        margin-top: 0;
        margin-bottom: calc(var(--spacing-unit) * 1);
        max-width: none;
        gap: calc(var(--spacing-unit) * 1);
    }
}

/* Mobile result panel adjustments */
@media (max-width: 700px) {
    .result-info {
        margin-top: var(--spacing-unit);
        gap: calc(var(--spacing-unit) * 0.5);
    }

    #game-over-text {
        font-size: 1.1em;
    }

    .result-right-panel .final-score-container {
        font-size: 1em;
    }
}

/* --- Leaderboard --- */
#leaderboard-section { margin-top: calc(var(--spacing-unit) * 4); padding-top: calc(var(--spacing-unit) * 3); }
#leaderboard-filters { margin-bottom: calc(var(--spacing-unit) * 3); display: flex; flex-direction: column; align-items: center; gap: calc(var(--spacing-unit) * 1.5); }
.filter-group { display: flex; align-items: center; flex-wrap: wrap; justify-content: center; }
.filter-group strong { margin-right: var(--spacing-unit); font-weight: 500; }
#leaderboard-list { max-width: 500px; margin: 0 auto calc(var(--spacing-unit) * 3) auto; text-align: left; counter-reset: leaderboard-counter; border: none; border-radius: var(--border-radius); overflow: hidden; }
#leaderboard-list li { padding: calc(var(--spacing-unit) * 1.5) var(--spacing-unit); border-bottom: none; counter-increment: leaderboard-counter; display: flex; gap: var(--spacing-unit); transition: background-color 0.2s ease; }
#leaderboard-list li:last-child { border-bottom: none; }
#leaderboard-list li::before { content: counter(leaderboard-counter) ". "; font-weight: 600; color: var(--color-accent-darker); min-width: 2.5em; text-align: right; }
#leaderboard-list li.user-score { font-weight: 700; background-color: color-mix(in srgb, var(--color-accent) 15%, transparent); }

/* --- Indicators --- */
#loading-indicator { font-style: italic; color: var(--color-disabled-text); padding: var(--spacing-unit) 0; }
#error-message { color: var(--color-error); background-color: var(--color-error-bg); padding: var(--spacing-unit) calc(var(--spacing-unit) * 2); border-radius: var(--border-radius); margin-top: calc(var(--spacing-unit) * 2); border: 1px solid var(--color-error); display: inline-block; }

/* --- Hover effects --- */
@media (hover: hover) {
    .btn-primary:hover:not(:disabled) { background-color: var(--color-accent-darker); border-color: var(--color-accent-darker); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); }
    .btn-secondary:hover:not(:disabled) { background-color: var(--color-secondary-bg-hover); }
    .btn-link:hover { color: var(--color-link); text-decoration: underline; }
    #user-nickname:hover { color: var(--color-link); text-decoration: underline; }
    .btn-icon:hover:not(:disabled) { opacity: 1; }
    .btn-filter:hover:not(:disabled) { background-color: var(--color-secondary-bg-hover); opacity: 1; }
    #difficulty-selection .difficulty-option button.difficulty-button:hover:not(:disabled) { background-color: var(--color-accent); border-color: var(--color-accent); color: var(--color-accent-text); }
    .options-group button:hover:not(:disabled),
    .options-group a.btn:hover { background-color: var(--color-accent); border-color: var(--color-accent); color: var(--color-accent-text); }
    #leaderboard-list li:hover { background-color: var(--color-secondary-bg-hover); }
    .country-list li a:hover { color: var(--color-link); text-decoration: underline; } /* Catalog links match footer style */
    .club-list li a:hover,
    #catalogue-content .club-list li a:hover { color: var(--color-link); text-decoration: underline; } /* Catalog links match footer style */
}

/* --- Footer Styling --- */
.app-footer { text-align: center; margin-top: auto; padding: calc(var(--spacing-unit) * 3) 0; font-size: 0.85em; color: var(--color-footer-text); width: 100%; }
.app-footer p { margin-bottom: calc(var(--spacing-unit) * 0.5); }
.app-footer a { color: var(--color-info-text); text-decoration: none; }
@media (hover: hover) { .app-footer a:hover { color: var(--color-link); text-decoration: underline; } }

/* --- Hide header/footer on mobile during quiz --- */
@media (max-width: 999px) {
    body.quiz-active .app-header,
    body.quiz-active .app-footer,
    body.quiz-result .app-header,
    body.quiz-result .app-footer {
        display: none !important;
    }
}

/* --- Legal/About Page Specific Styles --- */
.legal-container { max-width: 800px; margin: calc(var(--spacing-unit) * 3) auto; padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3); background-color: #fff; border-radius: var(--border-radius); box-shadow: 0 2px 5px rgba(0,0,0,0.05); text-align: left; }
.legal-container h1 { text-align: center; margin-bottom: 1.5em; font-size: 1.8em; color: var(--color-text);}
.legal-container h2 { margin-top: 1.5em; margin-bottom: 0.5em; font-size: 1.3em; color: var(--color-text);}
.legal-container p, .legal-container li { margin-bottom: 1em; line-height: 1.7; color: #444; }
.legal-container ul { list-style: disc; padding-left: 25px; margin-bottom: 1em;}
.legal-container a { color: var(--color-link); }
.back-link { display: block; text-align: center; margin-top: 30px; }
.about-photo-figure { margin: 2em auto; max-width: 90%; width: 450px; text-align: center; }
.about-photo-figure img { width: 100%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
.about-photo-figure figcaption { margin-top: 0.8em; font-size: 0.9em; color: var(--color-info-text); font-style: italic; }
.twitter-link { font-weight: 500; }

/* ------------------------------ */
/* Catalogue Specific Styles      */
/* ------------------------------ */

/* --- Catalogue Statistics Block --- */
.catalogue-stats {
    text-align: left;
    margin-bottom: calc(var(--spacing-unit) * 3);
    padding: calc(var(--spacing-unit) * 2);
    background-color: var(--color-secondary-bg);
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
}

.catalogue-stats p {
    margin-bottom: calc(var(--spacing-unit) * 0.5);
    font-size: 1.1em;
    line-height: 1.6;
}

.catalogue-stats p:last-child {
    margin-bottom: 0;
}

.catalogue-stats strong {
    font-weight: 600;
    color: var(--color-text);
}

/* --- Catalogue Desktop Two-Column Layout --- */

/* Expand catalogue container on desktop (like quiz) */
@media (min-width: 900px) {
    #catalogue-container {
        max-width: 1000px;
    }
}

/* Top row: Stats + Map Preview */
.catalogue-top-row {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 3);
    margin-bottom: calc(var(--spacing-unit) * 4);
}

/* Map preview block */
.catalogue-map-preview {
    text-align: left;
    padding: calc(var(--spacing-unit) * 2);
    background-color: var(--color-secondary-bg);
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
}

.catalogue-map-container {
    width: 100%;
    height: 180px;
    border-radius: var(--border-radius);
    overflow: hidden;
    background-color: #e9ecef;
}

.map-more-link {
    display: inline-block;
    margin-top: calc(var(--spacing-unit) * 1.5);
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.95em;
}

@media (hover: hover) {
    .map-more-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Stickers row: Last stickers + Most rated */
.catalogue-stickers-row {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 3);
    margin-bottom: calc(var(--spacing-unit) * 4);
}

.catalogue-stickers-row .last-stickers-section,
.catalogue-stickers-row .most-rated-section {
    margin-top: 0;
    margin-bottom: 0;
}

/* Links at bottom of sticker sections */
.view-full-log-link,
.rate-stickers-link {
    display: inline-block;
    margin-top: auto;
    padding-top: calc(var(--spacing-unit) * 2);
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.95em;
}

@media (hover: hover) {
    .view-full-log-link:hover,
    .rate-stickers-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Countries grid - two columns on desktop */
.catalogue-countries-grid {
    display: flex;
    flex-direction: column;
}

/* Desktop layout (min-width: 900px) */
@media (min-width: 900px) {
    /* Top row: two equal columns with same height using grid */
    .catalogue-top-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: calc(var(--spacing-unit) * 3);
    }

    .catalogue-top-row .catalogue-stats {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
    }

    .catalogue-top-row .catalogue-map-preview {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .catalogue-top-row .catalogue-map-container {
        flex: 1;
        height: auto;
        min-height: 160px;
    }

    /* Stickers row: two equal columns */
    .catalogue-stickers-row {
        flex-direction: row;
        align-items: stretch;
        gap: calc(var(--spacing-unit) * 3);
    }

    .catalogue-stickers-row .last-stickers-section,
    .catalogue-stickers-row .most-rated-section {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    /* Countries grid: two columns */
    .catalogue-countries-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: calc(var(--spacing-unit) * 4);
    }
}

/* --- Breadcrumbs Styling --- */
#catalogue-breadcrumbs {
    margin-bottom: calc(var(--spacing-unit) * 2.5); /* Ð’Ñ–Ð´ÑÑ‚ÑƒÐ¿ Ð¿Ñ–Ð´ breadcrumbs */
    text-align: left; /* Ð’Ð¸Ñ€Ñ–Ð²Ð½ÑŽÐ²Ð°Ð½Ð½Ñ Ð¿Ð¾ Ð»Ñ–Ð²Ð¾Ð¼Ñƒ ÐºÑ€Ð°ÑŽ */
    font-size: 0.9em;
    padding-bottom: var(--spacing-unit);
}

.breadcrumb-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex; /* Ð Ð¾Ð·Ð¼Ñ–Ñ‰ÑƒÑ”Ð¼Ð¾ ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¸ Ð² Ñ€ÑÐ´ */
    flex-wrap: wrap; /* Ð”Ð¾Ð·Ð²Ð¾Ð»ÑÑ”Ð¼Ð¾ Ð¿ÐµÑ€ÐµÐ½Ð¾ÑÐ¸Ñ‚Ð¸ Ð½Ð° Ð½Ð¾Ð²Ð¸Ð¹ Ñ€ÑÐ´Ð¾Ðº, ÑÐºÑ‰Ð¾ Ð½Ðµ Ð²Ð¼Ñ–Ñ‰Ð°ÑŽÑ‚ÑŒÑÑ */
}

.breadcrumb-item {
    display: inline-flex; /* Ð”Ð»Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð²Ñ–Ð´Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð½Ñ Ñ€Ð¾Ð·Ð´Ñ–Ð»ÑŽÐ²Ð°Ñ‡Ð° */
    align-items: center;
}

.breadcrumb-item a {
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
}

@media (hover: hover) {
    .breadcrumb-item a:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

.breadcrumb-item span { /* Ð”Ð»Ñ Ð¾ÑÑ‚Ð°Ð½Ð½ÑŒÐ¾Ð³Ð¾ ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°, ÑÐºÐ¸Ð¹ Ð½Ðµ Ñ” Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½ÑÐ¼ */
    color: var(--color-text); /* ÐÐ±Ð¾ var(--color-info-text) Ð´Ð»Ñ Ð¼ÐµÐ½Ñˆ ÑÑÐºÑ€Ð°Ð²Ð¾Ð³Ð¾ */
    font-weight: 500;
}

.breadcrumb-item::after { /* Ð Ð¾Ð·Ð´Ñ–Ð»ÑŽÐ²Ð°Ñ‡ */
    content: '>'; /* ÐœÐ¾Ð¶Ð½Ð° Ð²Ð¸ÐºÐ¾Ñ€Ð¸ÑÑ‚Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ Ñ–Ð½ÑˆÐ¸Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð», Ð½Ð°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´ / Ð°Ð±Ð¾ â†’ */
    margin: 0 calc(var(--spacing-unit) * 0.75);
    color: var(--color-separator-text);
}

.breadcrumb-item:last-child::after { /* ÐŸÑ€Ð¸Ð±Ð¸Ñ€Ð°Ñ”Ð¼Ð¾ Ñ€Ð¾Ð·Ð´Ñ–Ð»ÑŽÐ²Ð°Ñ‡ Ð´Ð»Ñ Ð¾ÑÑ‚Ð°Ð½Ð½ÑŒÐ¾Ð³Ð¾ ÐµÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð° */
    content: '';
    margin: 0;
}
.club-country-indicator {
    font-size: 0.8em;
    font-weight: normal;
    color: var(--color-info-text);
}

.sticker-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); /* ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ð° ÑÑ–Ñ‚ÐºÐ° */
    gap: var(--spacing-unit);
    margin-top: calc(var(--spacing-unit) * 2);
    text-align: left;
}

.sticker-preview-link {
    display: block;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    overflow: hidden;
    background-color: var(--color-secondary-bg);
    aspect-ratio: 1 / 1; /* Ð Ð¾Ð±Ð¸Ñ‚ÑŒ Ð¿Ñ€ÐµÐ²'ÑŽ ÐºÐ²Ð°Ð´Ñ€Ð°Ñ‚Ð½Ð¸Ð¼Ð¸ */
    transition: box-shadow 0.2s ease;
}

.sticker-preview-link:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border-color: var(--color-accent);
}

.sticker-preview-image {
    width: 100%;
    height: 100%;
    object-fit: contain; /* ÐÐ±Ð¾ 'cover', ÑÐºÑ‰Ð¾ Ñ…Ð¾Ñ‡ÐµÑˆ Ð·Ð°Ð¿Ð¾Ð²Ð½ÑŽÐ²Ð°Ñ‚Ð¸ ÐºÐ²Ð°Ð´Ñ€Ð°Ñ‚ */
    display: block;
}

#catalogue-container > h1 { /* The main H1 title for the catalogue page (e.g., "Sticker Catalogue") */
    font-size: 2em;
    margin-bottom: calc(var(--spacing-unit) * 3);
    text-align: center;
}

#catalogue-content h2 { /* The H2 subtitle (e.g., "Countries by Continent") */
    font-size: 1.8em;
    margin-top: calc(var(--spacing-unit) * 1);
    margin-bottom: calc(var(--spacing-unit) * 2.5);
    text-align: left;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--spacing-unit);
}

.continent-section {
    margin-bottom: calc(var(--spacing-unit) * 3);
    text-align: left;
}

.continent-section h3 { /* Continent Name (e.g., "Europe") */
    font-size: 1.4em;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    padding-bottom: calc(var(--spacing-unit) * 0.5);
    border-bottom: 1px dashed var(--color-border);
}

.country-list {
    list-style: none;
    padding-left: 0;
}

.country-list li {
    margin-bottom: var(--spacing-unit);
    font-size: 1.1em;
}

.country-list li a {
    text-decoration: none;
    color: var(--color-info-text);
    font-weight: 500;
    padding: calc(var(--spacing-unit) * 0.5) 0;
    display: inline-block;
    line-height: 1.3; /* Improve alignment with flag emoji */
}

.flag-emoji {
    margin-right: calc(var(--spacing-unit) * 1); /* Space between flag and country name */
    font-size: 1.2em; /* Slightly larger flags, adjust as needed */
    vertical-align: middle; /* Helps align emoji with text */
}

#catalogue-content > p { /* Direct p children for messages (loading, error, etc.) */
    font-size: 1em;
    color: var(--color-info-text);
    text-align: center;
    margin-top: calc(var(--spacing-unit) * 3);
    margin-bottom: calc(var(--spacing-unit) * 3);
}

#catalogue-content p a { /* For "Back to Catalogue Home" links etc. inside #catalogue-content */
    font-weight: 500;
    /* color: var(--color-link); Inherits from .country-list a if not specific enough, but good to have */
}

.club-list {
    list-style: none;
    padding-left: 0;
    margin-top: calc(var(--spacing-unit) * 2); /* Ð’Ñ–Ð´ÑÑ‚ÑƒÐ¿ Ð·Ð²ÐµÑ€Ñ…Ñƒ Ð²Ñ–Ð´ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ° ÐºÑ€Ð°Ñ—Ð½Ð¸ */
    text-align: left; /* Ð’Ð¸Ñ€Ñ–Ð²Ð½ÑŽÐ²Ð°Ð½Ð½Ñ ÑÐ¿Ð¸ÑÐºÑƒ ÐºÐ»ÑƒÐ±Ñ–Ð² Ð¿Ð¾ Ð»Ñ–Ð²Ð¾Ð¼Ñƒ ÐºÑ€Ð°ÑŽ */
}

.club-list li {
    margin-bottom: var(--spacing-unit);
    font-size: 1.1em; /* Ð Ð¾Ð·Ð¼Ñ–Ñ€ Ñ‚ÐµÐºÑÑ‚Ñƒ ÑÐº Ñƒ ÑÐ¿Ð¸ÑÐºÑƒ ÐºÑ€Ð°Ñ—Ð½ */
}

.club-list li a,
#catalogue-content .club-list li a {
    text-decoration: none;
    color: var(--color-info-text);
    font-weight: 500;
    display: inline-block;
    padding: calc(var(--spacing-unit) * 0.5) 0;
    line-height: 1.3; /* Ð©Ð¾Ð± Ð¿Ð¾ÑÐ¸Ð»Ð°Ð½Ð½Ñ Ð·Ð°Ð¹Ð¼Ð°Ð»Ð¾ Ð²ÑÑŽ ÑˆÐ¸Ñ€Ð¸Ð½Ñƒ li Ð´Ð»Ñ ÐºÑ€Ð°Ñ‰Ð¾Ð³Ð¾ ÐºÐ»Ñ–ÐºÑƒ */
}

/* Ð¡Ñ‚Ð¸Ð»Ñ– Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "Back to All Countries" Ð²Ð¶Ðµ Ð¼Ð°ÑŽÑ‚ÑŒ Ð±ÑƒÑ‚Ð¸ Ð¿Ð¾ÐºÑ€Ð¸Ñ‚Ñ– Ð·Ð°Ð³Ð°Ð»ÑŒÐ½Ð¸Ð¼Ð¸ .btn .btn-secondary */
/* ÐÐ»Ðµ Ð¼Ð¾Ð¶Ð½Ð° Ð´Ð¾Ð´Ð°Ñ‚Ð¸ Ð²Ñ–Ð´ÑÑ‚ÑƒÐ¿, ÑÐºÑ‰Ð¾ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð¾ */
#catalogue-content .btn-secondary { /* Ð¯ÐºÑ‰Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐ° Ð²ÑÐµÑ€ÐµÐ´Ð¸Ð½Ñ– #catalogue-content */
    margin-top: calc(var(--spacing-unit) * 3);
    display: inline-block; /* Ð©Ð¾Ð± margin-top Ð¿Ñ€Ð°Ñ†ÑŽÐ²Ð°Ð² Ñ– ÐºÐ½Ð¾Ð¿ÐºÐ° Ð½Ðµ Ñ€Ð¾Ð·Ñ‚ÑÐ³ÑƒÐ²Ð°Ð»Ð°ÑÑŒ Ð½Ð° Ð²ÑÑŽ ÑˆÐ¸Ñ€Ð¸Ð½Ñƒ */
}

/* Club info section */
.club-info-section {
    text-align: left;
    margin-bottom: calc(var(--spacing-unit) * 3);
    padding: 0;
}

.club-info-item {
    font-size: 1.1em;
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    line-height: 1.5;
    color: var(--color-text);
}

.club-info-item a {
    color: var(--color-info-text);
    text-decoration: none;
    word-break: break-all;
}

@media (hover: hover) {
    .club-info-item a:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Sticker Detail - Two Column Layout (like quiz end screen) */
.sticker-detail-view {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: left;
}

/* Desktop: expand to match quiz layout width */
@media (min-width: 1000px) {
    .sticker-detail-two-column {
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        justify-content: center;
        gap: calc(var(--spacing-unit) * 4);
        width: calc(100vw - var(--spacing-unit) * 4);
        max-width: 1000px;
        margin-left: auto;
        margin-right: auto;
        position: relative;
        left: 50%;
        transform: translateX(-50%);
    }

    .sticker-detail-image-container {
        /* Match quiz sticker size exactly */
        width: min(600px, calc(100vh - 300px));
        height: min(600px, calc(100vh - 300px));
        min-width: 450px;
        min-height: 450px;
    }
}

/* Tablet and smaller: default layout */
.sticker-detail-two-column {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    justify-content: center;
    gap: calc(var(--spacing-unit) * 4);
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
}

.sticker-detail-left-column {
    flex-shrink: 0;
}

.sticker-detail-image-container {
    width: 300px;
    height: 300px;
    background-color: var(--color-secondary-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: box-shadow 0.2s ease, border-color 0.2s ease;
    position: relative;
}

.sticker-detail-image-container:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-color: var(--color-accent);
}

.sticker-detail-image-container::after {
    content: 'View in full size';
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 0.85em;
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
}

.sticker-detail-image-container:hover::after {
    opacity: 1;
}

.sticker-detail-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    pointer-events: none;
}

/* Navigation buttons below sticker */
.sticker-nav-buttons {
    display: flex;
    justify-content: space-between;
    gap: calc(var(--spacing-unit) * 2);
    margin-top: calc(var(--spacing-unit) * 2);
    width: 100%;
}

.sticker-nav-btn {
    flex: 1;
    text-align: center;
}

.sticker-nav-placeholder {
    flex: 1;
}

/* Right panel - info block */
.sticker-detail-right-panel {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: calc(var(--spacing-unit) * 2);
    padding-top: calc(var(--spacing-unit) * 2);
}

.sticker-detail-info-block {
    text-align: left;
}

.sticker-detail-club-name {
    font-size: 1.3em;
    font-weight: 700;
    color: var(--color-text);
    margin: 0 0 calc(var(--spacing-unit) * 0.5) 0;
}

.sticker-detail-id {
    font-size: 1.3em;
    font-weight: 500;
    color: var(--color-info-text);
    margin: 0 0 calc(var(--spacing-unit) * 2) 0;
}

.sticker-detail-id span {
    font-weight: 700;
    color: var(--color-accent-darker);
}

.sticker-detail-date,
.sticker-detail-location {
    font-size: 1em;
    font-weight: 400;
    color: var(--color-info-text);
    margin: 0 0 calc(var(--spacing-unit) * 1) 0;
}

/* Action buttons below map or content */
.sticker-detail-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(var(--spacing-unit) * 1.5);
    margin-top: calc(var(--spacing-unit) * 3);
    width: 100%;
}

.sticker-detail-actions .btn {
    width: 100%;
    max-width: 300px;
}

.sticker-actions-no-map {
    margin-top: calc(var(--spacing-unit) * 4);
}

/* Mobile: stack columns vertically */
@media (max-width: 700px) {
    .sticker-detail-two-column {
        flex-direction: column;
        align-items: center;
        gap: calc(var(--spacing-unit) * 2);
    }

    .sticker-detail-image-container {
        width: 280px;
        height: 280px;
    }

    .sticker-detail-right-panel {
        align-items: center;
        text-align: center;
        padding-top: 0;
    }

    .sticker-detail-info-block {
        text-align: center;
    }

    .sticker-nav-buttons {
        max-width: 280px;
    }
}

/* Sticker Map Section */
.sticker-map-section {
    width: 100%;
    max-width: 600px;
    margin-top: calc(var(--spacing-unit) * 3);
    text-align: left;
}

/* Full width map below two-column layout */
.sticker-map-full-width {
    max-width: 100%;
    margin-top: calc(var(--spacing-unit) * 4);
}

/* Sticker Page Container - ensures consistent layout across all sticker pages */
.sticker-page-container {
    max-width: none;
    width: 100%;
    padding: 0;
}

.sticker-page-content-wrapper {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 0 calc(var(--spacing-unit) * 2);
    box-sizing: border-box;
}

/* Desktop: expand sticker page wrapper to match two-column layout */
@media (min-width: 1000px) {
    .sticker-page-content-wrapper {
        max-width: 1000px;
    }

    /* Remove the breakout positioning since wrapper controls width now */
    .sticker-page-container .sticker-detail-two-column {
        width: 100%;
        max-width: none;
        position: static;
        left: auto;
        transform: none;
        justify-content: flex-start; /* Align to left edge, not center */
    }

    /* Fixed width for left column to ensure consistent layout */
    .sticker-page-container .sticker-detail-left-column {
        width: 500px;
        flex-shrink: 0;
    }

    .sticker-page-container .sticker-detail-image-container {
        width: 500px;
        height: 500px;
        min-width: 500px;
        min-height: 500px;
    }

    /* Fixed width for right panel */
    .sticker-page-container .sticker-detail-right-panel {
        width: 400px;
        flex-shrink: 0;
    }
}

/* Tablet: sticker page wrapper matches container width */
@media (min-width: 701px) and (max-width: 999px) {
    .sticker-page-content-wrapper {
        max-width: 800px;
    }

    .sticker-page-container .sticker-detail-two-column {
        width: 100%;
        max-width: none;
        justify-content: flex-start;
    }

    .sticker-page-container .sticker-detail-left-column {
        width: 350px;
        flex-shrink: 0;
    }

    .sticker-page-container .sticker-detail-image-container {
        width: 350px;
        height: 350px;
    }

    .sticker-page-container .sticker-detail-right-panel {
        flex: 1;
        min-width: 200px;
    }
}

/* Mobile: full width with padding */
@media (max-width: 700px) {
    .sticker-page-content-wrapper {
        max-width: 100%;
        padding: 0 calc(var(--spacing-unit) * 1.5);
    }

    .sticker-page-container .sticker-detail-two-column {
        justify-content: center;
    }
}

.sticker-map-label {
    font-size: 1.2em;
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    color: var(--color-text);
}

.sticker-map-container {
    width: 100%;
    height: 300px;
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    overflow: hidden;
    z-index: 1;
}

/* Leaflet popup styling to match site design */
.leaflet-popup-content-wrapper {
    border-radius: var(--border-radius);
    font-family: var(--font-family);
}

.leaflet-popup-content {
    margin: 10px 14px;
    font-size: 0.95em;
    color: var(--color-text);
}

/* Inactive marker styling (nearby stickers) */
.inactive-marker {
    filter: grayscale(100%) opacity(0.6);
    transition: filter 0.2s ease;
}

.inactive-marker:hover {
    filter: grayscale(0%) opacity(1);
}

/* Nearby sticker popup styling */
.nearby-sticker-popup {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    text-align: center;
}

.nearby-sticker-popup strong {
    font-size: 0.95em;
    color: var(--color-text);
}

.map-popup-link {
    display: inline-block;
    color: var(--color-link);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.9em;
    padding: 2px 8px;
    border-radius: 4px;
    transition: background-color 0.2s ease;
}

.map-popup-link:hover {
    background-color: var(--color-secondary-bg);
    text-decoration: underline;
}

@media (max-width: 600px) {
    .sticker-map-container {
        height: 250px;
    }

    .sticker-map-label {
        font-size: 1em;
    }
}

/* Club Map Section */
.club-map-section {
    width: 100%;
    margin-top: calc(var(--spacing-unit) * 4);
    text-align: left;
}

.club-map-heading {
    font-size: 1.4em;
    font-weight: 600;
    margin-bottom: calc(var(--spacing-unit) * 2);
    color: var(--color-text);
}

.club-map-container {
    width: 100%;
    height: 400px;
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    overflow: hidden;
    z-index: 1;
}

.club-sticker-popup {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    text-align: center;
}

.club-sticker-popup strong {
    font-size: 0.95em;
    color: var(--color-text);
}

@media (max-width: 600px) {
    .club-map-container {
        height: 300px;
    }

    .club-map-heading {
        font-size: 1.2em;
    }
}

/* Global Map Page Styles */
.container.map-page-container {
    text-align: center;
    max-width: 1200px !important;
    width: 100%;
}

.map-page-container h1 {
    font-size: 2em;
    margin-bottom: calc(var(--spacing-unit) * 1);
}

.map-page-subtitle {
    font-size: 1.1em;
    color: var(--color-info-text);
    margin-bottom: calc(var(--spacing-unit) * 2);
}

.map-page-subtitle span {
    font-weight: 600;
    color: var(--color-text);
}

.global-map-container {
    width: 100%;
    height: 600px;
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    overflow: hidden;
    margin-bottom: calc(var(--spacing-unit) * 3);
    z-index: 1;
}

.map-page-container .home-actions {
    margin-top: 0;
}

/* View map button on sticker detail page and catalogue */
.view-map-btn-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 320px;
    margin: calc(var(--spacing-unit) * 2) auto 0 auto;
}

.view-map-btn-container .btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
}

.catalogue-map-btn-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 320px;
    margin: 0 auto calc(var(--spacing-unit) * 3) auto;
}

.catalogue-map-btn-container .btn {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
}

@media (max-width: 600px) {
    .global-map-container {
        height: 400px;
    }

    .container.map-page-container {
        max-width: 100%;
    }

    .map-page-container h1 {
        font-size: 1.6em;
    }

    .map-page-subtitle {
        font-size: 1em;
    }
}

/* ------------------------------ */
/* Responsiveness                 */
/* ------------------------------ */
@media (max-width: 768px) {
    .app-header { flex-direction: column; height: auto; padding: var(--spacing-unit); gap: var(--spacing-unit); margin-bottom: var(--spacing-unit); }
    #auth-section { order: 2; width: 100%; justify-content: center; }
    #user-status { width: auto; justify-content: center; flex-wrap: wrap; }
    #user-status > * { font-size: 0.9em; margin: 0 4px; }
    #user-nickname { max-width: 150px; }
    .logo-container { order: 1; }
    body:not(.logged-out) #app-logo { margin-left: auto; margin-right: auto; margin-bottom: var(--spacing-unit); height: calc(var(--header-height) * 0.65); width: auto; max-height: 40px; }
    #edit-nickname-form { position: static; width: 100%; margin-top: var(--spacing-unit); box-shadow: none; border: 1px solid var(--color-border); background-color: var(--color-secondary-bg); }
    .container { margin-top: var(--spacing-unit); }
    .legal-container { padding: calc(var(--spacing-unit) * 2); margin: var(--spacing-unit) auto; }
    .intro-text { margin-bottom: calc(var(--spacing-unit) * 2);}
}
@media (max-width: 700px) {
    #sticker-container { width: 100%; max-width: min(400px, 55vh); height: auto; aspect-ratio: 1; margin-bottom: var(--spacing-unit); }
    #game-area { margin-top: 0; }
    .options-group {
        grid-template-columns: 1fr; /* Full width single column */
        gap: calc(var(--spacing-unit) * 0.75);
        margin-bottom: var(--spacing-unit);
        width: 100%;
        max-width: min(400px, 55vh);
    }
    .options-group button,
    .options-group a.btn {
        width: 100%;
        height: 48px;
        font-size: 0.9em;
        padding: calc(var(--spacing-unit) * 0.5) var(--spacing-unit);
    }
    .game-info { margin-top: calc(var(--spacing-unit) * 0.5); margin-bottom: calc(var(--spacing-unit) * 0.5); flex-direction: row; gap: calc(var(--spacing-unit) * 3); }
    #timer, #score { font-size: 0.95em; padding: calc(var(--spacing-unit)*0.25) 0; }
    #time-left, #current-score { font-size: 1.05em; }
    .difficulty-options-container { gap: calc(var(--spacing-unit) * 1.5); }
}
@media (max-width: 600px) {
    body { padding: 0; }
    .container { padding: 0 var(--spacing-unit); margin-top: var(--spacing-unit); margin-bottom: calc(var(--spacing-unit) * 2); }
    .options-group {
        grid-template-columns: 1fr; /* Full width single column */
    }
    .game-info { flex-direction: row; gap: calc(var(--spacing-unit) * 3); }
    #result-area h2 { font-size: 2em; }
    #result-area .final-score-container { font-size: 1.5em; }
    #result-area #final-score { font-size: 1.8em; }
    #result-area #play-again { font-size: 1em; padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5); }
    #result-area #result-sign-in-button { font-size: 1em; padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5); }
    #leaderboard-filters { gap: var(--spacing-unit); }
    .filter-group { gap: calc(var(--spacing-unit) * 0.5); font-size: 0.9em; }
    .filter-group strong { display: block; width: 100%; margin-bottom: 5px; text-align: center; }
    .btn-filter { margin: 2px; }
    #leaderboard-list { max-width: 100%; padding: 0; } /* Was #leaderboard-list { max-width: 100%; padding: 0 var(--spacing-unit); } */
    #leaderboard-list li { font-size: 0.9em; padding: var(--spacing-unit); }
    #leaderboard-list li::before { min-width: 2em; }
    body.logged-out #app-logo { width: 60%; max-width: 200px; }
    .about-photo-figure { width: 100%; }
    #difficulty-selection h2 { font-size: 1.5em; margin-bottom: var(--spacing-unit) * 1.5; }
    .difficulty-options-container { gap: var(--spacing-unit); }
    .difficulty-option button.difficulty-button { padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2); font-size: 1em;}
    .difficulty-description { font-size: 0.8em;}

    /* Catalogue specific responsiveness adjustments for small screens */
    #catalogue-container > h1 { font-size: 1.8em; }
    #catalogue-content h2 { font-size: 1.5em; }
    .continent-section h3 { font-size: 1.2em; }
    .country-list li { font-size: 1em; }
    .flag-emoji { font-size: 1.1em; }
}

/* ------------------------------ */
/* Home Page Specific Styles      */
/* ------------------------------ */

/* Home page adjustments */
body.home-page .app-header {
    justify-content: center;
    margin-bottom: calc(var(--spacing-unit) * 2);
}

body.home-page .logo-container {
    width: 100%;
    display: flex;
    justify-content: center;
}

body.home-page #app-logo {
    height: calc(var(--header-height) * 0.5);
    width: auto;
    max-height: 32px;
}

.home-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    max-width: 600px;
    margin-top: 0;
    margin-bottom: 0;
    min-height: calc(100vh - var(--header-height) - 180px); /* Subtract header and footer */
}

.home-subtitle {
    font-size: 1.1em;
    color: var(--color-info-text);
    text-align: center;
    margin-bottom: calc(var(--spacing-unit) * 2);
    line-height: 1.5;
}

.home-subtitle #total-stickers {
    font-weight: 600;
    color: var(--color-text);
}

#featured-sticker {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin-bottom: calc(var(--spacing-unit) * 2);
    width: 100%;
}

#home-sticker-link {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
}

.random-sticker-label {
    font-size: 1em;
    color: var(--color-info-text);
    text-align: center;
    margin: 0 0 calc(var(--spacing-unit) * 1.5) 0;
    font-weight: 500;
}

#home-sticker-container {
    width: 80%;
    max-width: 400px;
    aspect-ratio: 1 / 1;
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    background-color: var(--color-secondary-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

#home-sticker-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.home-actions {
    display: grid;
    grid-template-columns: 1fr;
    gap: calc(var(--spacing-unit) * 1.5);
    width: 100%;
    max-width: 300px;
    margin: 0 auto;
}

.home-actions .btn,
.home-actions button {
    width: 100%;
    height: 68px;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    margin: 0;
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    color: var(--color-text);
    font-weight: 400;
    font-size: 1em;
    cursor: pointer;
}

#home-loading-indicator {
    font-style: italic;
    color: var(--color-disabled-text);
    padding: var(--spacing-unit) 0;
}

#home-error-message {
    color: var(--color-error);
    background-color: var(--color-error-bg);
    padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
    border-radius: var(--border-radius);
    margin-top: calc(var(--spacing-unit) * 2);
    border: 1px solid var(--color-error);
    display: inline-block;
}

/* New homepage layout (quiz-style) */
#home-game-area {
    margin-top: calc(var(--spacing-unit) * 2);
}

#home-sticker-section {
    width: 100%;
    display: flex;
    justify-content: center;
    margin-bottom: calc(var(--spacing-unit) * 3);
}

#home-sticker-section #home-sticker-container {
    width: 300px;
    height: 300px;
    margin: 0;
    max-width: none;
}

.home-right-panel {
    display: contents;
}

.home-info {
    width: 100%;
    max-width: 300px;
    margin: 0 auto calc(var(--spacing-unit) * 2) auto;
    text-align: center;
}

#home-title {
    font-size: 1.1em;
    color: var(--color-text);
    font-weight: 500;
}

#home-title #total-stickers {
    font-weight: 600;
}

/* Desktop horizontal layout */
@media (min-width: 1000px) {
    .home-container {
        max-width: 1200px;
    }

    #home-game-area {
        display: flex !important;
        flex-direction: row;
        align-items: flex-start;
        justify-content: center;
        gap: calc(var(--spacing-unit) * 4);
        margin-top: calc(var(--spacing-unit) * 2);
        width: calc(100vw - var(--spacing-unit) * 4);
        max-width: 1000px;
        margin-left: auto;
        margin-right: auto;
    }

    #home-sticker-section {
        flex-shrink: 0;
        margin-bottom: 0;
    }

    .home-right-panel {
        display: flex !important;
        flex-direction: column;
        align-items: center;
        gap: calc(var(--spacing-unit) * 2);
        flex-shrink: 0;
    }

    .home-info {
        width: 300px;
        margin: 0 0 calc(var(--spacing-unit) * 1) 0;
        text-align: left;
    }

    #home-game-area .home-actions.options-group {
        grid-template-columns: 1fr;
        gap: calc(var(--spacing-unit) * 1.5);
    }
}

/* Responsive adjustments for home page */
@media (max-width: 700px) {
    body.home-page #app-logo {
        width: 50%;
        max-width: 180px;
    }

    body.home-page .app-header {
        margin-bottom: var(--spacing-unit);
    }

    .home-container {
        padding: 0 calc(var(--spacing-unit) * 2);
        min-height: calc(100vh - 140px);
    }

    .home-subtitle {
        font-size: 1em;
        margin-bottom: var(--spacing-unit);
    }

    #home-sticker-container {
        margin-bottom: var(--spacing-unit);
    }

    #featured-sticker {
        margin-bottom: calc(var(--spacing-unit) * 1.5);
    }

    .home-actions {
        max-width: 100%;
        gap: var(--spacing-unit);
    }

    .home-actions .btn,
    .home-actions button {
        height: 56px;
        font-size: 0.95em;
    }

    #home-sticker-section #home-sticker-container {
        width: 80%;
        height: auto;
        max-width: 300px;
        aspect-ratio: 1 / 1;
    }
}

@media (max-width: 600px) {
    body.home-page #app-logo {
        width: 55%;
        max-width: 160px;
    }

    .home-subtitle {
        font-size: 0.95em;
    }
}


/* Smooth fade-in for lazy loaded gallery images */
.sticker-preview-image[loading="lazy"] {
    opacity: 0;
    animation: lazyFadeIn 0.3s ease-out forwards;
}

@keyframes lazyFadeIn {
    from { opacity: 0; transform: scale(0.98); }
    to { opacity: 1; transform: scale(1); }
}

/* ------------------------------ */
/* Statistics Page Styles         */
/* ------------------------------ */

/* Stats more link in catalogue */
.stats-more-link {
    display: inline-block;
    margin-top: calc(var(--spacing-unit) * 1.5);
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.95em;
}

@media (hover: hover) {
    .stats-more-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Last Stickers Section */
.last-stickers-section {
    margin-top: calc(var(--spacing-unit) * 4);
    margin-bottom: calc(var(--spacing-unit) * 4);
    text-align: left;
}

.last-stickers-section h3 {
    font-size: 1.4em;
    font-weight: 600;
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    padding-bottom: calc(var(--spacing-unit) * 0.5);
    border-bottom: 1px dashed var(--color-border);
}

.last-stickers-date-header {
    margin-top: calc(var(--spacing-unit) * 2);
    margin-bottom: calc(var(--spacing-unit) * 1);
    color: var(--color-text);
    font-size: 1em;
    font-weight: 600;
}

.last-stickers-date-header:first-of-type {
    margin-top: 0;
}

.last-stickers-list {
    list-style: none;
    padding-left: 0;
}

.last-stickers-list li {
    margin-bottom: var(--spacing-unit);
    font-size: 1.1em;
}

.last-stickers-list .sticker-link,
.last-stickers-list .club-link {
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
}

@media (hover: hover) {
    .last-stickers-list .sticker-link:hover,
    .last-stickers-list .club-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

.view-full-log-link {
    display: inline-block;
    margin-top: calc(var(--spacing-unit) * 1.5);
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.95em;
}

@media (hover: hover) {
    .view-full-log-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Most Rated Stickers Section */
.most-rated-section {
    margin-top: calc(var(--spacing-unit) * 4);
    margin-bottom: calc(var(--spacing-unit) * 4);
    text-align: left;
}

.most-rated-section h3 {
    font-size: 1.4em;
    font-weight: 600;
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    padding-bottom: calc(var(--spacing-unit) * 0.5);
    border-bottom: 1px dashed var(--color-border);
}

.most-rated-list {
    list-style: none;
    padding-left: 0;
}

.most-rated-list li {
    margin-bottom: var(--spacing-unit);
    font-size: 1.1em;
}

.most-rated-list .rank {
    color: var(--color-rank);
    font-weight: 600;
    min-width: 2em;
    display: inline-block;
}

.most-rated-list .sticker-link,
.most-rated-list .club-link {
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
}

@media (hover: hover) {
    .most-rated-list .sticker-link:hover,
    .most-rated-list .club-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

.rating-badge {
    display: inline-block;
    background-color: var(--color-accent);
    color: var(--color-accent-text);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: 600;
    margin-left: 4px;
}

.rate-stickers-link {
    display: inline-block;
    margin-top: calc(var(--spacing-unit) * 1.5);
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.95em;
}

@media (hover: hover) {
    .rate-stickers-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Stats page container */
#stats-container {
    text-align: left;
    max-width: 1000px;
}

#stats-container > h1 {
    text-align: center;
    font-size: 2em;
    margin-bottom: calc(var(--spacing-unit) * 4);
}

/* Stats sections */
.stats-section {
    margin-bottom: calc(var(--spacing-unit) * 4);
}

.stats-section h2 {
    font-size: 1.5em;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    padding-bottom: calc(var(--spacing-unit) * 0.5);
    border-bottom: 1px solid var(--color-border);
}

.stats-section-subtitle {
    font-size: 0.95em;
    color: var(--color-info-text);
    margin-bottom: calc(var(--spacing-unit) * 2);
    margin-top: calc(var(--spacing-unit) * -1);
}

/* Chart container - rectangular on desktop */
.chart-container {
    width: 100%;
    height: 280px;
    background-color: var(--color-secondary-bg);
    border-radius: var(--border-radius);
    padding: calc(var(--spacing-unit) * 2);
    border: 1px solid var(--color-border);
}

/* Stats grid - clubs and countries side by side on desktop */
.stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: calc(var(--spacing-unit) * 4);
}

.stats-grid .stats-section {
    margin-bottom: 0;
}

/* Stats table (borderless) */
.stats-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 1.05em;
}

.stats-table tr {
    border-bottom: 1px solid var(--color-border);
    height: 48px;
}

.stats-table tr:last-child {
    border-bottom: none;
}

.stats-table td {
    padding: 0 calc(var(--spacing-unit) * 0.5);
    vertical-align: middle;
    line-height: 1.3;
}

.stats-table .stats-rank {
    width: 40px;
    text-align: right;
    padding-right: calc(var(--spacing-unit) * 1.5);
    font-weight: 600;
    color: var(--color-accent-darker);
}

.stats-table .stats-name {
    text-align: left;
}

.stats-table .stats-name a {
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
}

@media (hover: hover) {
    .stats-table .stats-name a:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

.stats-table .stats-count {
    width: 60px;
    text-align: right;
    color: var(--color-info-text);
    font-weight: 500;
}

.stats-table .flag-emoji {
    margin-right: calc(var(--spacing-unit) * 0.75);
}

/* Stats actions (buttons at bottom) */
.stats-actions {
    margin-top: calc(var(--spacing-unit) * 4);
    margin-bottom: calc(var(--spacing-unit) * 2);
}

/* Responsive adjustments for stats page */
@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: 1fr;
        gap: calc(var(--spacing-unit) * 3);
    }

    .stats-grid .stats-section {
        margin-bottom: calc(var(--spacing-unit) * 2);
    }
}

@media (max-width: 600px) {
    #stats-container > h1 {
        font-size: 1.6em;
    }

    .stats-section h2 {
        font-size: 1.3em;
    }

    .chart-container {
        height: 250px;
        padding: var(--spacing-unit);
    }

    .stats-table {
        font-size: 0.95em;
    }

    .stats-table tr {
        height: 44px;
    }

    .stats-table td {
        padding: 0 calc(var(--spacing-unit) * 0.25);
    }

    .stats-table .stats-rank {
        width: 30px;
    }

    .stats-table .stats-count {
        width: 50px;
    }
}

/* ------------------------------ */
/* Leaderboard Page Styles        */
/* ------------------------------ */

#leaderboard-page-container {
    max-width: 1000px;
}

#leaderboard-page-container > h1 {
    margin-bottom: calc(var(--spacing-unit) * 2);
}

/* Filter buttons row */
#leaderboard-filters {
    margin-bottom: calc(var(--spacing-unit) * 3);
}

#leaderboard-filters .filter-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: calc(var(--spacing-unit) * 3);
    flex-wrap: wrap;
}

#leaderboard-filters .filter-group {
    display: flex;
    gap: calc(var(--spacing-unit) * 1);
}

#leaderboard-filters .btn-nav {
    padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2);
    font-size: 0.95em;
}

#leaderboard-filters .btn-nav.active {
    background-color: var(--color-accent);
    border-color: var(--color-accent);
    color: var(--color-accent-text);
    font-weight: 600;
}

/* Three-column grid for leaderboards - same as stats-grid */
.leaderboard-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: calc(var(--spacing-unit) * 4);
}

.leaderboard-section {
    margin-bottom: calc(var(--spacing-unit) * 4);
}

.leaderboard-section h2 {
    font-size: 1.5em;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    padding-bottom: calc(var(--spacing-unit) * 0.5);
    border-bottom: 1px solid var(--color-border);
}

/* User score highlighting */
.leaderboard-section .user-score-row {
    background-color: rgba(255, 193, 7, 0.15);
}

.leaderboard-section .separator-row td {
    text-align: center;
    color: var(--color-info-text);
    padding: calc(var(--spacing-unit) * 0.5) 0;
    border-bottom: none;
}

/* Leaderboard action buttons */
.leaderboard-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(var(--spacing-unit) * 1.5);
    margin-top: calc(var(--spacing-unit) * 4);
}

.leaderboard-actions .btn {
    width: 100%;
    max-width: 300px;
}

/* Responsive: tablet */
@media (max-width: 900px) {
    .leaderboard-grid {
        gap: calc(var(--spacing-unit) * 3);
    }
}

/* Responsive: mobile - stack columns */
@media (max-width: 700px) {
    #leaderboard-filters .filter-row {
        flex-direction: column;
        gap: calc(var(--spacing-unit) * 1.5);
    }

    .leaderboard-grid {
        grid-template-columns: 1fr;
        gap: calc(var(--spacing-unit) * 3);
    }

    .leaderboard-section {
        margin-bottom: calc(var(--spacing-unit) * 2);
    }

    .leaderboard-section h2 {
        font-size: 1.3em;
    }
}

/* ------------------------------ */
/* Player Profile Page Styles     */
/* ------------------------------ */

.profile-container {
    max-width: 600px;
}

.profile-username {
    font-size: 2em;
    font-weight: 700;
    color: var(--color-text);
}

.profile-edit-link {
    font-size: 0.4em;
    font-weight: 400;
    color: var(--color-link);
    text-decoration: none;
    margin-left: 0.5em;
    vertical-align: middle;
}

.profile-edit-link:hover {
    text-decoration: underline;
}

.profile-info {
    background-color: var(--color-secondary-bg);
    border-radius: var(--border-radius);
    padding: calc(var(--spacing-unit) * 2.5);
    margin-bottom: calc(var(--spacing-unit) * 3);
    border: 1px solid var(--color-border);
}

.profile-stat {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    font-size: 1.1em;
}

.profile-stat:last-child {
    margin-bottom: 0;
}

.profile-stat-label {
    color: var(--color-info-text);
    font-weight: 500;
}

.profile-stat-value {
    font-weight: 600;
    color: var(--color-text);
}

.profile-best-scores {
    margin-bottom: calc(var(--spacing-unit) * 3);
}

.profile-best-scores h2 {
    font-size: 1.5em;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: calc(var(--spacing-unit) * 2);
    text-align: center;
}

.best-scores-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: calc(var(--spacing-unit) * 2);
}

.best-score-card {
    background-color: var(--color-secondary-bg);
    border-radius: var(--border-radius);
    padding: calc(var(--spacing-unit) * 2);
    text-align: center;
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 0.75);
}

.best-score-difficulty {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--color-info-text);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.best-score-value {
    font-size: 2em;
    font-weight: 700;
    color: var(--color-accent-darker);
}

.best-score-date {
    font-size: 0.85em;
    color: var(--color-info-text);
}

/* Profile Last Games */
.profile-last-games {
    margin-top: calc(var(--spacing-unit) * 3);
    margin-bottom: calc(var(--spacing-unit) * 3);
}

.profile-last-games h2 {
    font-size: 1.5em;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: calc(var(--spacing-unit) * 2);
    text-align: center;
}

.last-games-list {
    background-color: var(--color-secondary-bg);
    border-radius: var(--border-radius);
    border: 1px solid var(--color-border);
    overflow: hidden;
}

.last-game-item {
    display: grid;
    grid-template-columns: 1fr 80px 60px;
    gap: calc(var(--spacing-unit) * 2);
    padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
    border-bottom: 1px solid var(--color-border);
    align-items: center;
}

.last-game-item:last-child {
    border-bottom: none;
}

.last-game-date {
    font-size: 0.9em;
    color: var(--color-info-text);
}

.last-game-difficulty {
    font-size: 0.85em;
    font-weight: 500;
    color: var(--color-text);
    text-align: center;
}

.last-game-score {
    font-size: 1em;
    font-weight: 600;
    color: var(--color-accent-darker);
    text-align: right;
}

/* Leaderboard player links */
#leaderboard-list .player-link {
    color: inherit;
    text-decoration: none;
    cursor: pointer;
}

@media (hover: hover) {
    #leaderboard-list .player-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Profile page responsive */
@media (max-width: 600px) {
    .profile-username {
        font-size: 1.6em;
    }

    .profile-stat {
        font-size: 1em;
    }

    .best-scores-grid {
        grid-template-columns: 1fr;
        gap: calc(var(--spacing-unit) * 1.5);
    }

    .best-score-card {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
    }

    .best-score-difficulty {
        font-size: 1em;
        min-width: 70px;
        text-align: left;
    }

    .best-score-value {
        font-size: 1.5em;
    }

    .best-score-date {
        min-width: 90px;
        text-align: right;
    }
}

/* ------------------------------ */
/* Sticker Log Page               */
/* ------------------------------ */

/* Page description */
.page-description {
    color: var(--color-info-text);
    font-size: 0.95em;
    margin-bottom: calc(var(--spacing-unit) * 3);
}

/* Sticker log content */
#stickerlog-content {
    text-align: left;
    margin-top: calc(var(--spacing-unit) * 3);
}

/* Date headers - styled like continent sections */
.stickerlog-date-header {
    margin-top: calc(var(--spacing-unit) * 3);
    margin-bottom: calc(var(--spacing-unit) * 1.5);
}

.stickerlog-date-header h2 {
    font-size: 1.4em;
    font-weight: 600;
    color: var(--color-text);
    margin: 0 0 calc(var(--spacing-unit) * 1.5) 0;
    padding-bottom: calc(var(--spacing-unit) * 0.5);
    border-bottom: 1px dashed var(--color-border);
}

.stickerlog-date-header:first-child {
    margin-top: 0;
}

/* Sticker entries list - styled like country list */
.stickerlog-entries-list {
    list-style: none;
    padding-left: 0;
}

.stickerlog-entry {
    margin-bottom: var(--spacing-unit);
    font-size: 1.1em;
}

/* Sticker and club links - styled like country links */
.stickerlog-entry .sticker-link,
.stickerlog-entry .club-link {
    color: var(--color-info-text);
    text-decoration: none;
    font-weight: 500;
}

@media (hover: hover) {
    .stickerlog-entry .sticker-link:hover,
    .stickerlog-entry .club-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Pagination */
#pagination-controls {
    margin-top: calc(var(--spacing-unit) * 4);
    margin-bottom: calc(var(--spacing-unit) * 3);
}

.pagination-wrapper {
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 2);
    align-items: center;
}

.pagination-info {
    font-size: 0.9em;
    color: var(--color-info-text);
    text-align: center;
}

.pagination-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: calc(var(--spacing-unit) * 1);
    justify-content: center;
    align-items: center;
}

.pagination-btn {
    display: inline-block;
    padding: calc(var(--spacing-unit) * 0.75) calc(var(--spacing-unit) * 1.5);
    min-width: 44px;
    text-align: center;
    background-color: var(--color-background);
    color: var(--color-text);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    text-decoration: none;
    font-size: 0.95em;
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

.pagination-btn-active {
    background-color: var(--color-accent);
    color: var(--color-accent-text);
    border-color: var(--color-accent);
    font-weight: 600;
}

.pagination-btn-disabled {
    cursor: not-allowed;
    opacity: 0.5;
    background-color: var(--color-disabled-bg);
    color: var(--color-disabled-text);
    border-color: var(--color-border);
}

@media (hover: hover) {
    .pagination-btn:not(.pagination-btn-active):not(.pagination-btn-disabled):hover {
        background-color: var(--color-secondary-bg-hover);
        border-color: var(--color-accent);
    }
}

.pagination-ellipsis {
    padding: 0 calc(var(--spacing-unit) * 0.5);
    color: var(--color-info-text);
}

/* Responsive adjustments */
@media (max-width: 600px) {
    .stickerlog-date-header h2 {
        font-size: 1.2em;
    }

    .stickerlog-entry {
        font-size: 1em;
    }

    .pagination-btn {
        padding: calc(var(--spacing-unit) * 0.6) calc(var(--spacing-unit) * 1.2);
        min-width: 40px;
        font-size: 0.85em;
    }

    .last-stickers-section h3 {
        font-size: 1.2em;
    }

    .last-stickers-list li {
        font-size: 1em;
    }
}

/* ------------------------------ */
/* Time To Run & Daily Quiz Mode Styles */
/* ------------------------------ */

/* TTR/Daily difficulty border colors on sticker container (3x thicker, 50% transparent) */
#sticker-container.ttr-difficulty-1 {
    border: 9px solid rgba(40, 167, 69, 0.5) !important; /* Green for Easy - 50% transparent */
}

#sticker-container.ttr-difficulty-2 {
    border: 9px solid rgba(255, 193, 7, 0.5) !important; /* Yellow for Medium - 50% transparent */
}

#sticker-container.ttr-difficulty-3 {
    border: 9px solid rgba(220, 53, 69, 0.5) !important; /* Red for Hard - 50% transparent */
}

/* TTR/Daily timer flashing animation on last 10 seconds */
#time-left.ttr-flash {
    animation: ttr-timer-flash 0.5s ease-in-out infinite;
}

@keyframes ttr-timer-flash {
    0%, 100% { color: var(--color-error); opacity: 1; }
    50% { color: var(--color-error); opacity: 0.4; }
}

/* Time bonus flash animation (green flash when time is added in Daily mode) */
#time-left.time-bonus-flash {
    animation: time-bonus-flash 0.6s ease-out;
}

@keyframes time-bonus-flash {
    0% { color: var(--color-success); transform: scale(1); }
    30% { color: var(--color-success); transform: scale(1.3); }
    60% { color: var(--color-success); transform: scale(1.1); }
    100% { color: var(--color-text); transform: scale(1); }
}

/* TTR/Daily mode body indicator for potential styling */
body.ttr-mode .game-info #timer,
body.daily-mode .game-info #timer {
    color: var(--color-text);
}

/* TTR/Daily mode mobile layout - compact counters */
@media (max-width: 600px) {
    body.ttr-mode .game-info,
    body.daily-mode .game-info {
        width: 100%;
        max-width: 300px;
        justify-content: space-between;
        gap: 0;
    }

    body.ttr-mode .game-info #timer,
    body.ttr-mode .game-info #lives,
    body.ttr-mode .game-info #score,
    body.daily-mode .game-info #timer,
    body.daily-mode .game-info #lives,
    body.daily-mode .game-info #score {
        font-size: 0.75em;
        flex: 1;
        text-align: center;
        min-width: 0;
    }

    body.ttr-mode .game-info #timer,
    body.daily-mode .game-info #timer {
        text-align: left;
    }

    body.ttr-mode .game-info #score,
    body.daily-mode .game-info #score {
        text-align: right;
    }

    body.ttr-mode .game-info #time-left,
    body.ttr-mode .game-info #current-score,
    body.daily-mode .game-info #time-left,
    body.daily-mode .game-info #current-score {
        font-size: 1em;
    }
}

/* Hunt them all (Daily Quiz) win message styling */
#game-over-text.daily-win {
    color: var(--color-success) !important;
    font-size: 1.5em;
}

/* Hunt them all button styling - inverted colors (black bg, yellow text) */
#daily-mode-button,
#landing-daily-button {
    background-color: var(--color-text) !important;
    color: var(--color-accent) !important;
    border-color: var(--color-text) !important;
    width: 100% !important;  /* Match other buttons width */
}

#landing-daily-button {
    width: 90% !important;
    max-width: 320px !important;
}

@media (hover: hover) {
    #daily-mode-button:hover:not(:disabled),
    #landing-daily-button:hover:not(:disabled) {
        background-color: #333 !important;
        border-color: #333 !important;
    }
}

/* Hunt them all description under button */
.daily-quiz-description {
    font-size: 0.85em;
    color: var(--color-info-text);
    margin: calc(var(--spacing-unit) * -0.5) 0 calc(var(--spacing-unit) * 1.5) 0;
    padding: 0;
}

/* Leaderboard 4-column grid for TTR */
.leaderboard-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: calc(var(--spacing-unit) * 4);
}

/* TTR section in leaderboard */
.leaderboard-section-ttr h2 {
    color: var(--color-accent-darker);
}

/* Tablet: 4 columns with smaller gaps */
@media (max-width: 900px) {
    .leaderboard-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: calc(var(--spacing-unit) * 3);
    }
}

/* Mobile: stack all columns */
@media (max-width: 600px) {
    .leaderboard-grid {
        grid-template-columns: 1fr;
        gap: calc(var(--spacing-unit) * 3);
    }

    .leaderboard-section-ttr {
        margin-top: calc(var(--spacing-unit) * 2);
    }
}

/* TTR option in difficulty selection - same style as others */
.difficulty-option.ttr-option {
    margin-top: calc(var(--spacing-unit) * 1);
    padding-top: calc(var(--spacing-unit) * 2);
    border-top: 1px dashed var(--color-border);
}

.difficulty-option.ttr-option button {
    width: 100%;
    display: block;
    margin-bottom: calc(var(--spacing-unit) * 0.75);
}

/* ------------------------------ */
/* Battle Page Styles             */
/* ------------------------------ */

.battle-page-container {
    max-width: none;
    width: 100%;
    padding: 0;
}

.battle-page-content-wrapper {
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
    padding: calc(var(--spacing-unit) * 2);
}

#battle-header {
    text-align: center;
    margin-bottom: calc(var(--spacing-unit) * 3);
}

#battle-header h1 {
    font-size: 1.8em;
    font-weight: 700;
    color: var(--color-text);
    margin-bottom: calc(var(--spacing-unit) * 0.5);
}

.battle-subtitle {
    font-size: 1em;
    color: var(--color-info-text);
    margin: 0;
}

.battle-stats {
    font-size: 0.9em;
    color: var(--color-info-text);
    margin-top: calc(var(--spacing-unit) * 1);
}

/* Battle Arena */
.battle-arena {
    min-height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Loading state */
.battle-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(var(--spacing-unit) * 2);
    color: var(--color-info-text);
}

.loading-spinner {
    width: 48px;
    height: 48px;
    border: 4px solid var(--color-border);
    border-top-color: var(--color-accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Battle Content - Two stickers side by side */
.battle-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(var(--spacing-unit) * 3);
    width: 100%;
}

/* Individual sticker in battle */
.battle-sticker {
    position: relative;
    cursor: pointer;
    transition: transform 0.3s ease, opacity 0.3s ease;
}

.battle-sticker-image-container {
    width: 400px;
    height: 400px;
    background-color: var(--color-secondary-bg);
    border-radius: var(--border-radius);
    border: 2px solid var(--color-border);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
}

.battle-sticker-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* Hover effects */
@media (hover: hover) {
    .battle-sticker:hover .battle-sticker-image-container {
        border-color: var(--color-accent);
        box-shadow: 0 4px 16px rgba(255, 193, 7, 0.3);
        transform: scale(1.02);
    }

    .battle-sticker:hover .battle-sticker-overlay {
        opacity: 1;
    }
}

/* Vote overlay */
.battle-sticker-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
    padding: calc(var(--spacing-unit) * 2);
    opacity: 0;
    transition: opacity 0.2s ease;
    border-radius: 0 0 var(--border-radius) var(--border-radius);
}

.vote-text {
    display: block;
    text-align: center;
    color: white;
    font-weight: 600;
    font-size: 1.2em;
}

/* VS indicator */
.battle-vs {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 60px;
    height: 60px;
    background-color: var(--color-accent);
    color: var(--color-accent-text);
    font-weight: 700;
    font-size: 1.3em;
    border-radius: 50%;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.battle-vs.fade-out {
    opacity: 0;
    transform: scale(0.5);
}

/* Winner/Loser animations */
.battle-sticker.winner {
    animation: winner-pulse 0.8s ease forwards;
}

.battle-sticker.loser {
    animation: loser-fade 0.8s ease forwards;
}

@keyframes winner-pulse {
    0% { transform: scale(1); }
    30% { transform: scale(1.08); }
    100% { transform: scale(1.05); }
}

@keyframes loser-fade {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(0.9); opacity: 0.3; }
}

.battle-sticker.winner .battle-sticker-image-container {
    border-color: var(--color-success);
    box-shadow: 0 0 20px rgba(40, 167, 69, 0.5);
}

.battle-sticker.loser .battle-sticker-image-container {
    border-color: var(--color-error);
}

/* Rating change indicator */
.rating-change-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: var(--color-success);
    color: white;
    font-weight: 700;
    font-size: 1.5em;
    padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2);
    border-radius: var(--border-radius);
    animation: rating-pop 0.8s ease forwards;
    z-index: 10;
}

@keyframes rating-pop {
    0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.5);
    }
    30% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1.2);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -80%) scale(1);
    }
}

/* Error state */
.battle-error {
    text-align: center;
    padding: calc(var(--spacing-unit) * 4);
    color: var(--color-info-text);
}

.battle-error p {
    margin-bottom: calc(var(--spacing-unit) * 2);
}

/* Result overlay (for more complex animations if needed) */
.battle-result {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(255, 255, 255, 0.9);
    z-index: 20;
}

/* Responsive: Tablet */
@media (max-width: 900px) {
    .battle-sticker-image-container {
        width: 300px;
        height: 300px;
    }

    .battle-vs {
        width: 50px;
        height: 50px;
        font-size: 1.1em;
    }

    .battle-content {
        gap: calc(var(--spacing-unit) * 2);
    }
}

/* Responsive: Mobile - stack vertically */
@media (max-width: 700px) {
    .battle-content {
        flex-direction: column;
        gap: calc(var(--spacing-unit) * 2);
    }

    .battle-sticker-image-container {
        width: min(350px, 90vw);
        height: min(350px, 90vw);
    }

    .battle-vs {
        width: 44px;
        height: 44px;
        font-size: 1em;
    }

    #battle-header h1 {
        font-size: 1.4em;
    }

    .battle-subtitle {
        font-size: 0.9em;
    }

    /* On mobile, always show vote overlay */
    .battle-sticker-overlay {
        opacity: 1;
    }
}

@media (max-width: 400px) {
    .battle-sticker-image-container {
        width: min(280px, 85vw);
        height: min(280px, 85vw);
    }
}

/* Sticker rating display on sticker detail pages */
.sticker-detail-rating {
    font-size: 1.1em;
    font-weight: 500;
    color: var(--color-info-text);
    margin-top: calc(var(--spacing-unit) * 0.5);
}

.sticker-detail-rating a {
    color: var(--color-info-text);
    text-decoration: none;
}

@media (hover: hover) {
    .sticker-detail-rating a:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Answer Rate display on sticker detail pages */
.sticker-detail-answer-rate {
    font-size: 1.1em;
    font-weight: 500;
    color: var(--color-info-text);
    margin-top: calc(var(--spacing-unit) * 0.5);
}

/* Difficulty display on sticker detail pages */
.sticker-detail-difficulty {
    font-size: 1.1em;
    font-weight: 500;
    color: var(--color-info-text);
    margin-top: calc(var(--spacing-unit) * 0.5);
}

/* Added date display on sticker detail pages */
.sticker-detail-added {
    font-size: 0.95em;
    color: var(--color-info-text);
    margin-top: calc(var(--spacing-unit) * 1);
}

/* Edit link on sticker page */
.edit-link {
    font-size: 0.5em;
    font-weight: 400;
    color: var(--color-info-text);
    text-decoration: none;
    margin-left: 0.5em;
    vertical-align: middle;
}

@media (hover: hover) {
    .edit-link:hover {
        color: var(--color-link);
        text-decoration: underline;
    }
}

/* Sticker edit form */
.sticker-edit-form {
    background-color: var(--color-secondary-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    padding: calc(var(--spacing-unit) * 2);
    margin: calc(var(--spacing-unit) * 1.5) 0;
}

.edit-field {
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    position: relative;
}

.edit-field label {
    display: block;
    font-size: 0.9em;
    font-weight: 500;
    color: var(--color-info-text);
    margin-bottom: calc(var(--spacing-unit) * 0.5);
}

.edit-input,
.edit-select {
    width: 100%;
    padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 1.5);
    font-size: 1em;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    background-color: var(--color-background);
    color: var(--color-text);
}

.edit-input:focus,
.edit-select:focus {
    outline: none;
    border-color: var(--color-link);
}

/* Autocomplete dropdown */
.autocomplete-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-top: none;
    border-radius: 0 0 var(--border-radius) var(--border-radius);
    max-height: 200px;
    overflow-y: auto;
    z-index: 100;
    display: none;
}

.autocomplete-item {
    padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 1.5);
    cursor: pointer;
    font-size: 0.95em;
}

.autocomplete-item:hover {
    background-color: var(--color-secondary-bg);
}

/* Edit form buttons */
.edit-buttons {
    display: flex;
    gap: calc(var(--spacing-unit) * 1);
    margin-top: calc(var(--spacing-unit) * 2);
}

.btn-save {
    background-color: #22c55e;
    color: white;
    border: none;
    padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2);
    border-radius: var(--border-radius);
    font-weight: 500;
    cursor: pointer;
}

.btn-save:hover:not(:disabled) {
    background-color: #16a34a;
}

.btn-save:disabled {
    background-color: #86efac;
    cursor: not-allowed;
}

.btn-cancel {
    background-color: #ef4444;
    color: white;
    border: none;
    padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2);
    border-radius: var(--border-radius);
    font-weight: 500;
    cursor: pointer;
}

.btn-cancel:hover {
    background-color: #dc2626;
}

/* Battle page action buttons */
.battle-actions {
    display: flex;
    justify-content: center;
    gap: calc(var(--spacing-unit) * 2);
    margin-top: calc(var(--spacing-unit) * 4);
}

.battle-actions .btn {
    min-width: 160px;
}

@media (max-width: 500px) {
    .battle-actions {
        flex-direction: column;
        align-items: center;
        gap: calc(var(--spacing-unit) * 1.5);
    }

    .battle-actions .btn {
        width: 100%;
        max-width: 280px;
    }
}
